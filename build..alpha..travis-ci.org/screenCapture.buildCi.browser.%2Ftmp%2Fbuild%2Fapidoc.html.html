<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/diversario/node-ssdp#readme">node-ssdp (v3.2.1)</a>
</h1>
<h4>A node.js SSDP client and server library.</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-ssdp">module node-ssdp</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Base">
            function <span class="apidocSignatureSpan">node-ssdp.</span>Base
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Client">
            function <span class="apidocSignatureSpan">node-ssdp.</span>Client
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Server">
            function <span class="apidocSignatureSpan">node-ssdp.</span>Server
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-ssdp.</span>Base.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-ssdp.</span>Client.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-ssdp.</span>Server.prototype</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-ssdp.Base">module node-ssdp.Base</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Base.Base">
            function <span class="apidocSignatureSpan">node-ssdp.</span>Base
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Base.super_">
            function <span class="apidocSignatureSpan">node-ssdp.Base.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-ssdp.Base.prototype">module node-ssdp.Base.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Base.prototype._createSockets">
            function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>_createSockets
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Base.prototype._getHeaders">
            function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>_getHeaders
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Base.prototype._getMethod">
            function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>_getMethod
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Base.prototype._getSSDPHeader">
            function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>_getSSDPHeader
            <span class="apidocSignatureSpan">(method, headers, isResponse)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Base.prototype._getStatusCode">
            function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>_getStatusCode
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Base.prototype._init">
            function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>_init
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Base.prototype._msearch">
            function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>_msearch
            <span class="apidocSignatureSpan">(headers, msg, rinfo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Base.prototype._notify">
            function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>_notify
            <span class="apidocSignatureSpan">(headers, msg, rinfo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Base.prototype._parseCommand">
            function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>_parseCommand
            <span class="apidocSignatureSpan">(msg, rinfo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Base.prototype._parseMessage">
            function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>_parseMessage
            <span class="apidocSignatureSpan">(msg, rinfo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Base.prototype._parseResponse">
            function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>_parseResponse
            <span class="apidocSignatureSpan">(msg, rinfo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Base.prototype._respondToSearch">
            function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>_respondToSearch
            <span class="apidocSignatureSpan">(serviceType, rinfo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Base.prototype._send">
            function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>_send
            <span class="apidocSignatureSpan">(message, host, port, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Base.prototype._start">
            function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>_start
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Base.prototype._stop">
            function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>_stop
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Base.prototype.addUSN">
            function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>addUSN
            <span class="apidocSignatureSpan">(device)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-ssdp.Client">module node-ssdp.Client</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Client.Client">
            function <span class="apidocSignatureSpan">node-ssdp.</span>Client
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Client.super_">
            function <span class="apidocSignatureSpan">node-ssdp.Client.</span>super_
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-ssdp.Client.prototype">module node-ssdp.Client.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Client.prototype.search">
            function <span class="apidocSignatureSpan">node-ssdp.Client.prototype.</span>search
            <span class="apidocSignatureSpan">(serviceType)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Client.prototype.start">
            function <span class="apidocSignatureSpan">node-ssdp.Client.prototype.</span>start
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Client.prototype.stop">
            function <span class="apidocSignatureSpan">node-ssdp.Client.prototype.</span>stop
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-ssdp.Server">module node-ssdp.Server</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Server.Server">
            function <span class="apidocSignatureSpan">node-ssdp.</span>Server
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Server.super_">
            function <span class="apidocSignatureSpan">node-ssdp.Server.</span>super_
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-ssdp.Server.prototype">module node-ssdp.Server.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Server.prototype._initAdLoop">
            function <span class="apidocSignatureSpan">node-ssdp.Server.prototype.</span>_initAdLoop
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Server.prototype._startAdLoop">
            function <span class="apidocSignatureSpan">node-ssdp.Server.prototype.</span>_startAdLoop
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Server.prototype._stopAdLoop">
            function <span class="apidocSignatureSpan">node-ssdp.Server.prototype.</span>_stopAdLoop
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Server.prototype.advertise">
            function <span class="apidocSignatureSpan">node-ssdp.Server.prototype.</span>advertise
            <span class="apidocSignatureSpan">(alive)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Server.prototype.start">
            function <span class="apidocSignatureSpan">node-ssdp.Server.prototype.</span>start
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-ssdp.Server.prototype.stop">
            function <span class="apidocSignatureSpan">node-ssdp.Server.prototype.</span>stop
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-ssdp" id="apidoc.module.node-ssdp">module node-ssdp</a></h1>


    <h2>
        <a href="#apidoc.element.node-ssdp.Base" id="apidoc.element.node-ssdp.Base">
        function <span class="apidocSignatureSpan">node-ssdp.</span>Base
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SSDP(opts) {
  var self = this

  if (!(this instanceof SSDP)) return new SSDP(opts)

  this._subclass = this._subclass || 'ssdp-base'

  opts = opts || {}

  EE.call(self)

  this._init(opts)

  this._createSockets()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-ssdp.Client" id="apidoc.element.node-ssdp.Client">
        function <span class="apidocSignatureSpan">node-ssdp.</span>Client
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SsdpClient(opts) {
  this._subclass = 'ssdp-client'
  SSDP.call(this, opts)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-ssdp.Server" id="apidoc.element.node-ssdp.Server">
        function <span class="apidocSignatureSpan">node-ssdp.</span>Server
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SsdpServer(opts) {
  this._subclass = 'node-ssdp:server'
  SSDP.call(this, opts)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>








</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-ssdp.Base" id="apidoc.module.node-ssdp.Base">module node-ssdp.Base</a></h1>


    <h2>
        <a href="#apidoc.element.node-ssdp.Base.Base" id="apidoc.element.node-ssdp.Base.Base">
        function <span class="apidocSignatureSpan">node-ssdp.</span>Base
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SSDP(opts) {
  var self = this

  if (!(this instanceof SSDP)) return new SSDP(opts)

  this._subclass = this._subclass || 'ssdp-base'

  opts = opts || {}

  EE.call(self)

  this._init(opts)

  this._createSockets()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-ssdp.Base.super_" id="apidoc.element.node-ssdp.Base.super_">
        function <span class="apidocSignatureSpan">node-ssdp.Base.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-ssdp.Base.prototype" id="apidoc.module.node-ssdp.Base.prototype">module node-ssdp.Base.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.node-ssdp.Base.prototype._createSockets" id="apidoc.element.node-ssdp.Base.prototype._createSockets">
        function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>_createSockets
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_createSockets = function () {
  var interfaces = os.networkInterfaces()
    , self = this

  this.sockets = {}

  Object.keys(interfaces).forEach(function (iName) {
    self._logger('discovering all IPs from interface %s', iName)

    interfaces[iName].forEach(function (ipInfo) {
      if (ipInfo.internal == false &amp;&amp; ipInfo.family == "IPv4") {
        self._logger('Will use interface %s', iName)
        var socket

        if (parseFloat(process.version.replace(/\w/, '')) &gt;= 0.12) {
          socket = dgram.createSocket({type: 'udp4', reuseAddr: self._reuseAddr})
        } else {
          socket = dgram.createSocket('udp4')
        }

        if (socket) {
          socket.unref()

          self.sockets[ipInfo.address] = socket
        }
      }
    })
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  opts = opts || {}

  EE.call(self)

  this._init(opts)

  this.<span class="apidocCodeKeywordSpan">_createSockets</span>()
}


util.inherits(SSDP, EE)


/**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-ssdp.Base.prototype._getHeaders" id="apidoc.element.node-ssdp.Base.prototype._getHeaders">
        function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>_getHeaders
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _getHeaders(msg) {
  var lines = msg.split("\r\n")

  var headers = {}

  lines.forEach(function (line) {
    if (line.length) {
      var pairs = line.match(ssdpHeader)
      if (pairs) headers[pairs[1].toUpperCase()] = pairs[2] // e.g. {'HOST': 239.255.255.250:1900}
    }
  })

  return headers
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * Parses SSDP command.
 *
 * @param msg
 * @param rinfo
 */
SSDP.prototype._parseCommand = function parseCommand(msg, rinfo) {
var method = this._getMethod(msg)
  , headers = this.<span class="apidocCodeKeywordSpan">_getHeaders</span>(msg)

switch (method) {
  case c.NOTIFY:
    this._notify(headers, msg, rinfo)
    break
  case c.M_SEARCH:
    this._msearch(headers, msg, rinfo)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-ssdp.Base.prototype._getMethod" id="apidoc.element.node-ssdp.Base.prototype._getMethod">
        function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>_getMethod
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _getMethod(msg) {
  var lines = msg.split("\r\n")
    , type = lines.shift().split(' ')// command, such as "NOTIFY * HTTP/1.1"
    , method = (type[0] || '').toLowerCase()

  return method
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Parses SSDP command.
 *
 * @param msg
 * @param rinfo
 */
SSDP.prototype._parseCommand = function parseCommand(msg, rinfo) {
var method = this.<span class="apidocCodeKeywordSpan">_getMethod</span>(msg)
  , headers = this._getHeaders(msg)

switch (method) {
  case c.NOTIFY:
    this._notify(headers, msg, rinfo)
    break
  case c.M_SEARCH:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-ssdp.Base.prototype._getSSDPHeader" id="apidoc.element.node-ssdp.Base.prototype._getSSDPHeader">
        function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>_getSSDPHeader
        <span class="apidocSignatureSpan">(method, headers, isResponse)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_getSSDPHeader = function (method, headers, isResponse) {
  var message = []

  method = method.toUpperCase()

  if (isResponse) {
    message.push('HTTP/1.1 ' + method)
  } else {
    message.push(method + ' * HTTP/1.1')
  }

  Object.keys(headers).forEach(function (header) {
    message.push(header + ': ' + headers[header])
  })

  message.push('\r\n')

  return message.join('\r\n')
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

if (!this._started) {
  return this.start(function () {
    self.search(serviceType)
  })
}

var pkt = self.<span class="apidocCodeKeywordSpan">_getSSDPHeader</span>(
  c.M_SEARCH,
  {
    'HOST': self._ssdpServerHost,
    'ST': serviceType,
    'MAN': '"ssdp:discover"',
    'MX': 3
  }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-ssdp.Base.prototype._getStatusCode" id="apidoc.element.node-ssdp.Base.prototype._getStatusCode">
        function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>_getStatusCode
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _getStatusCode(msg) {
  var lines = msg.split("\r\n")
    , type = lines.shift().split(' ')// command, such as "NOTIFY * HTTP/1.1"
    , code = parseInt(type[1], 10)

  return code
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @param msg
 * @param rinfo
 */
SSDP.prototype._parseResponse = function parseResponse(msg, rinfo) {
  this._logger('SSDP response: %o', {'message': msg})

  var headers = this._getHeaders(msg)
    , statusCode = this.<span class="apidocCodeKeywordSpan">_getStatusCode</span>(msg)

  this.emit('response', headers, statusCode, rinfo)
}



SSDP.prototype.addUSN = function (device) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-ssdp.Base.prototype._init" id="apidoc.element.node-ssdp.Base.prototype._init">
        function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>_init
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_init = function (opts) {
  this._logger = opts.customLogger || debug(this._subclass)

  this._ssdpSig = opts.ssdpSig || getSsdpSignature()

  this._explicitSocketBind = opts.explicitSocketBind
  this._reuseAddr = opts.reuseAddr === undefined ? true : opts.reuseAddr

  // User shouldn't need to set these
  this._ssdpIp = opts.ssdpIp || c.SSDP_DEFAULT_IP
  this._ssdpPort = opts.ssdpPort || c.SSDP_DEFAULT_PORT
  this._ssdpTtl = opts.ssdpTtl || 4

  // port on which to listen for messages
  // this generally should be left up to the system
  this._sourcePort = opts.sourcePort || 0

  this._adInterval = opts.adInterval || 10000

  this._ttl = opts.ttl || 1800

  if (typeof opts.location === 'function') {
    Object.defineProperty(this, '_location', {
      enumerable: true,
      get: opts.location
    })
  } else {
    // Probably should specify these
    this._location = opts.location || 'http://' + ip.address() + ':' + 10293 + '/upnp/desc.html'
  }

  this._ssdpServerHost = this._ssdpIp + ':' + this._ssdpPort

  this._usns = {}
  this._udn = opts.udn || 'uuid:f40c2981-7329-40b7-8b04-27f187aecfb5'

  this._extraHeaders = opts.headers || {}

  this._allowWildcards = opts.allowWildcards

  this._suppressRootDeviceAdvertisements = opts.suppressRootDeviceAdvertisements
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  this._subclass = this._subclass || 'ssdp-base'

  opts = opts || {}

  EE.call(self)

  this.<span class="apidocCodeKeywordSpan">_init</span>(opts)

  this._createSockets()
}


util.inherits(SSDP, EE)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-ssdp.Base.prototype._msearch" id="apidoc.element.node-ssdp.Base.prototype._msearch">
        function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>_msearch
        <span class="apidocSignatureSpan">(headers, msg, rinfo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_msearch = function (headers, msg, rinfo) {
  this._logger('SSDP M-SEARCH event: %o', {'ST': headers.ST, 'address': rinfo.address, 'port': rinfo.port})

  if (!headers.MAN || !headers.MX || !headers.ST) return

  this._respondToSearch(headers.ST, rinfo)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    , headers = this._getHeaders(msg)

  switch (method) {
    case c.NOTIFY:
      this._notify(headers, msg, rinfo)
      break
    case c.M_SEARCH:
      this.<span class="apidocCodeKeywordSpan">_msearch</span>(headers, msg, rinfo)
      break
    default:
      this._logger('Unhandled command: %o', {'message': msg, 'rinfo': rinfo})
  }
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-ssdp.Base.prototype._notify" id="apidoc.element.node-ssdp.Base.prototype._notify">
        function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>_notify
        <span class="apidocSignatureSpan">(headers, msg, rinfo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_notify = function (headers, msg, rinfo) {
  if (!headers.NTS) {
    this._logger('Missing NTS header: %o', headers)
    return
  }

  switch (headers.NTS.toLowerCase()) {
    // Device coming to life.

    case c.SSDP_ALIVE:
      this.emit(c.ADVERTISE_ALIVE, headers, rinfo)
      break

    // Device shutting down.
    case c.SSDP_BYE:
      this.emit(c.ADVERTISE_BYE, headers, rinfo)
      break

    default:
      this._logger('Unhandled NOTIFY event: %o', {'message': msg, 'rinfo': rinfo})
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 */
SSDP.prototype._parseCommand = function parseCommand(msg, rinfo) {
var method = this._getMethod(msg)
  , headers = this._getHeaders(msg)

switch (method) {
  case c.NOTIFY:
    this.<span class="apidocCodeKeywordSpan">_notify</span>(headers, msg, rinfo)
    break
  case c.M_SEARCH:
    this._msearch(headers, msg, rinfo)
    break
  default:
    this._logger('Unhandled command: %o', {'message': msg, 'rinfo': rinfo})
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-ssdp.Base.prototype._parseCommand" id="apidoc.element.node-ssdp.Base.prototype._parseCommand">
        function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>_parseCommand
        <span class="apidocSignatureSpan">(msg, rinfo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parseCommand(msg, rinfo) {
  var method = this._getMethod(msg)
    , headers = this._getHeaders(msg)

  switch (method) {
    case c.NOTIFY:
      this._notify(headers, msg, rinfo)
      break
    case c.M_SEARCH:
      this._msearch(headers, msg, rinfo)
      break
    default:
      this._logger('Unhandled command: %o', {'message': msg, 'rinfo': rinfo})
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

 var type = msg.split('\r\n').shift()

 // HTTP/#.# ### Response to M-SEARCH
 if (httpHeader.test(type)) {
   this._parseResponse(msg, rinfo)
 } else {
   this.<span class="apidocCodeKeywordSpan">_parseCommand</span>(msg, rinfo)
 }
}


/**
* Parses SSDP command.
*
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-ssdp.Base.prototype._parseMessage" id="apidoc.element.node-ssdp.Base.prototype._parseMessage">
        function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>_parseMessage
        <span class="apidocSignatureSpan">(msg, rinfo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_parseMessage = function (msg, rinfo) {
  msg = msg.toString()

  var type = msg.split('\r\n').shift()

  // HTTP/#.# ### Response to M-SEARCH
  if (httpHeader.test(type)) {
    this._parseResponse(msg, rinfo)
  } else {
    this._parseCommand(msg, rinfo)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    var socket = self.sockets[iface]

    socket.on('error', function onSocketError(err) {
self._logger('Socker error: %s', err.message)
    })

    socket.on('message', function onSocketMessage(msg, rinfo) {
self.<span class="apidocCodeKeywordSpan">_parseMessage</span>(msg, rinfo)
    })

    socket.on('listening', function onSocketListening() {
var addr = socket.address()

self._logger('SSDP listening: %o', {address: 'http://' + addr.address + ':' + addr.port, 'interface
': iface})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-ssdp.Base.prototype._parseResponse" id="apidoc.element.node-ssdp.Base.prototype._parseResponse">
        function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>_parseResponse
        <span class="apidocSignatureSpan">(msg, rinfo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parseResponse(msg, rinfo) {
  this._logger('SSDP response: %o', {'message': msg})

  var headers = this._getHeaders(msg)
    , statusCode = this._getStatusCode(msg)

  this.emit('response', headers, statusCode, rinfo)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
SSDP.prototype._parseMessage = function (msg, rinfo) {
  msg = msg.toString()

  var type = msg.split('\r\n').shift()

  // HTTP/#.# ### Response to M-SEARCH
  if (httpHeader.test(type)) {
    this.<span class="apidocCodeKeywordSpan">_parseResponse</span>(msg, rinfo)
  } else {
    this._parseCommand(msg, rinfo)
  }
}


/**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-ssdp.Base.prototype._respondToSearch" id="apidoc.element.node-ssdp.Base.prototype._respondToSearch">
        function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>_respondToSearch
        <span class="apidocSignatureSpan">(serviceType, rinfo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_respondToSearch = function (serviceType, rinfo) {
  var self = this
    , peer_addr = rinfo.address
    , peer_port = rinfo.port
    , stRegex
    , acceptor

  // unwrap quoted string
  if (serviceType[0] == '"' &amp;&amp; serviceType[serviceType.length - 1] == '"') {
    serviceType = serviceType.slice(1, -1)
  }

  if (self._allowWildcards) {
    stRegex = new RegExp(serviceType.replace(/\*/g, '.*') + '$')
    acceptor = function (usn, serviceType) {
      return serviceType === c.SSDP_ALL || stRegex.test(usn)
    }
  } else {
    acceptor = function (usn, serviceType) {
      return serviceType === c.SSDP_ALL || usn === serviceType
    }
  }

  Object.keys(self._usns).forEach(function (usn) {
    var udn = self._usns[usn]

    if (self._allowWildcards) {
      udn = udn.replace(stRegex, serviceType)
    }

    if (acceptor(usn, serviceType)) {
      var pkt = self._getSSDPHeader(
        '200 OK', extend({
          'ST': serviceType === c.SSDP_ALL ? usn : serviceType,
          'USN': udn,
          'LOCATION': self._location,
          'CACHE-CONTROL': 'max-age=' + self._ttl,
          'DATE': new Date().toUTCString(),
          'SERVER': self._ssdpSig,
          'EXT': ''
        }, self._extraHeaders),
        true
      )

      self._logger('Sending a 200 OK for an M-SEARCH: %o', {'peer': peer_addr, 'port': peer_port})

      var message = new Buffer(pkt)

      self._send(message, peer_addr, peer_port, function (err, bytes) {
        self._logger('Sent M-SEARCH response: %o', {'message': pkt})
      })
    }
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @param rinfo
*/
SSDP.prototype._msearch = function (headers, msg, rinfo) {
 this._logger('SSDP M-SEARCH event: %o', {'ST': headers.ST, 'address': rinfo.address, 'port&amp;#
x27;: rinfo.port})

 if (!headers.MAN || !headers.MX || !headers.ST) return

 this.<span class="apidocCodeKeywordSpan">_respondToSearch</span>(headers.ST, rinfo)
}



/**
* Sends out a response to M-SEARCH commands.
*
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-ssdp.Base.prototype._send" id="apidoc.element.node-ssdp.Base.prototype._send">
        function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>_send
        <span class="apidocSignatureSpan">(message, host, port, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_send = function (message, host, port, cb) {
  var self = this

  if (typeof host === 'function') {
    cb = host
    host = this._ssdpIp
    port = this._ssdpPort
  }

  var ipAddresses = Object.keys(this.sockets)

  async.each(ipAddresses, function (ipAddress, next) {
    var socket = self.sockets[ipAddress]

    socket.send(message, 0, message.length, port, host, next)
  }, cb)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }
  )

  self._logger('Sending an M-SEARCH request')

  var message = new Buffer(pkt)

  self.<span class="apidocCodeKeywordSpan">_send</span>(message, function (err, bytes) {
    self._logger('Sent M-SEARCH request: %o', {'message': pkt})
  })
}



module.exports = SsdpClient
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-ssdp.Base.prototype._start" id="apidoc.element.node-ssdp.Base.prototype._start">
        function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>_start
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_start = function (cb) {
  var self = this

  if (self._started) {
    self._logger('Already started.')
    return
  }

  if (!this.sockets) {
    this._createSockets()
  }

  self._started = true

  var interfaces = Object.keys(this.sockets)

  async.each(interfaces, function (iface, next) {
    var socket = self.sockets[iface]

    socket.on('error', function onSocketError(err) {
      self._logger('Socker error: %s', err.message)
    })

    socket.on('message', function onSocketMessage(msg, rinfo) {
      self._parseMessage(msg, rinfo)
    })

    socket.on('listening', function onSocketListening() {
      var addr = socket.address()

      self._logger('SSDP listening: %o', {address: 'http://' + addr.address + ':' + addr.port, 'interface': iface})

      try {
        socket.addMembership(self._ssdpIp, iface) // TODO: specifying the interface in there might make a difference
        socket.setMulticastTTL(self._ssdpTtl)
      } catch (e) {
        if (e.code === 'ENODEV' || e.code === 'EADDRNOTAVAIL') {
          self._logger('Interface %s is not present to add multicast group membership. Scheduling a retry. Error: %s', addr, e.message
)
          setTimeout(addMembership, 5000)
        } else {
          throw e
        }
      }
    })

    if (self._explicitSocketBind) {
      socket.bind(self._sourcePort, iface, next)
    } else {
      socket.bind(self._sourcePort, next) // socket binds on 0.0.0.0
    }
  }, cb)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 var self = this;
 return new Promise(function(success, failure) {
   function onBind(err) {
     if (cb) cb.apply(self, arguments)
     if (err) return failure(err)
     success()
   }
   self.<span class="apidocCodeKeywordSpan">_start</span>(onBind)
 })
}


/**
*Close UDP socket.
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-ssdp.Base.prototype._stop" id="apidoc.element.node-ssdp.Base.prototype._stop">
        function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>_stop
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_stop = function () {
  var self = this

  if (!this.sockets) {
    this._logger('Already stopped.')
    return
  }

  Object.keys(this.sockets).forEach(function (ipAddress) {
    var socket = self.sockets[ipAddress]

    socket &amp;&amp; socket.close()

    self._logger('Stopped socket on %s', ipAddress)
  })

  this.sockets = null

  this._socketBound = this._started = false
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}


/**
*Close UDP socket.
*/
SsdpClient.prototype.stop = function () {
 this.<span class="apidocCodeKeywordSpan">_stop</span>()
}


/**
*
* @param {String} serviceType
* @returns {*}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-ssdp.Base.prototype.addUSN" id="apidoc.element.node-ssdp.Base.prototype.addUSN">
        function <span class="apidocSignatureSpan">node-ssdp.Base.prototype.</span>addUSN
        <span class="apidocSignatureSpan">(device)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">addUSN = function (device) {
  this._usns[device] = this._udn + '::' + device
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
## Usage - Server

```javascript
var Server = require('node-ssdp').Server
  , server = new Server()
;

server.<span class="apidocCodeKeywordSpan">addUSN</span>('upnp:rootdevice');
server.addUSN('urn:schemas-upnp-org:device:MediaServer:1');
server.addUSN('urn:schemas-upnp-org:service:ContentDirectory:1');
server.addUSN('urn:schemas-upnp-org:service:ConnectionManager:1');

server.on('advertise-alive', function (headers) {
  // Expire old devices from your cache.
  // Register advertising device somewhere (as designated in http headers heads)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-ssdp.Client" id="apidoc.module.node-ssdp.Client">module node-ssdp.Client</a></h1>


    <h2>
        <a href="#apidoc.element.node-ssdp.Client.Client" id="apidoc.element.node-ssdp.Client.Client">
        function <span class="apidocSignatureSpan">node-ssdp.</span>Client
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SsdpClient(opts) {
  this._subclass = 'ssdp-client'
  SSDP.call(this, opts)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-ssdp.Client.super_" id="apidoc.element.node-ssdp.Client.super_">
        function <span class="apidocSignatureSpan">node-ssdp.Client.</span>super_
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SSDP(opts) {
  var self = this

  if (!(this instanceof SSDP)) return new SSDP(opts)

  this._subclass = this._subclass || 'ssdp-base'

  opts = opts || {}

  EE.call(self)

  this._init(opts)

  this._createSockets()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-ssdp.Client.prototype" id="apidoc.module.node-ssdp.Client.prototype">module node-ssdp.Client.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.node-ssdp.Client.prototype.search" id="apidoc.element.node-ssdp.Client.prototype.search">
        function <span class="apidocSignatureSpan">node-ssdp.Client.prototype.</span>search
        <span class="apidocSignatureSpan">(serviceType)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function search(serviceType) {
  var self = this

  if (!this._started) {
    return this.start(function () {
      self.search(serviceType)
    })
  }

  var pkt = self._getSSDPHeader(
    c.M_SEARCH,
    {
      'HOST': self._ssdpServerHost,
      'ST': serviceType,
      'MAN': '"ssdp:discover"',
      'MX': 3
    }
  )

  self._logger('Sending an M-SEARCH request')

  var message = new Buffer(pkt)

  self._send(message, function (err, bytes) {
    self._logger('Sent M-SEARCH request: %o', {'message': pkt})
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      , client = new Client();

    client.on('response', function (headers, statusCode, rinfo) {
      console.log('Got a response to an m-search.');
    });

    // search for a service type
    client.<span class="apidocCodeKeywordSpan">search</span>('urn:schemas-upnp-org:service:ContentDirectory:1');

    // Or get a list of all services on the network

    client.search('ssdp:all');
```

## Usage - Server
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-ssdp.Client.prototype.start" id="apidoc.element.node-ssdp.Client.prototype.start">
        function <span class="apidocSignatureSpan">node-ssdp.Client.prototype.</span>start
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">start = function (cb) {
  var self = this;
  return new Promise(function(success, failure) {
    function onBind(err) {
      if (cb) cb.apply(self, arguments)
      if (err) return failure(err)
      success()
    }
    self._start(onBind)
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...





var Server = require('./index.js').Server;
var server = new Server();
server.<span class="apidocCodeKeywordSpan">start</span>();
setTimeout(function () {
  server.stop();
  server.start();
}, 500);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-ssdp.Client.prototype.stop" id="apidoc.element.node-ssdp.Client.prototype.stop">
        function <span class="apidocSignatureSpan">node-ssdp.Client.prototype.</span>stop
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stop = function () {
  this._stop()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...



var Server = require('./index.js').Server;
var server = new Server();
server.start();
setTimeout(function () {
  server.<span class="apidocCodeKeywordSpan">stop</span>();
  server.start();
}, 500);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-ssdp.Server" id="apidoc.module.node-ssdp.Server">module node-ssdp.Server</a></h1>


    <h2>
        <a href="#apidoc.element.node-ssdp.Server.Server" id="apidoc.element.node-ssdp.Server.Server">
        function <span class="apidocSignatureSpan">node-ssdp.</span>Server
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SsdpServer(opts) {
  this._subclass = 'node-ssdp:server'
  SSDP.call(this, opts)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-ssdp.Server.super_" id="apidoc.element.node-ssdp.Server.super_">
        function <span class="apidocSignatureSpan">node-ssdp.Server.</span>super_
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SSDP(opts) {
  var self = this

  if (!(this instanceof SSDP)) return new SSDP(opts)

  this._subclass = this._subclass || 'ssdp-base'

  opts = opts || {}

  EE.call(self)

  this._init(opts)

  this._createSockets()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-ssdp.Server.prototype" id="apidoc.module.node-ssdp.Server.prototype">module node-ssdp.Server.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.node-ssdp.Server.prototype._initAdLoop" id="apidoc.element.node-ssdp.Server.prototype._initAdLoop">
        function <span class="apidocSignatureSpan">node-ssdp.Server.prototype.</span>_initAdLoop
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_initAdLoop = function () {
  var self = this

  // Wake up.
  setTimeout(self.advertise.bind(self), 3000)

  self._startAdLoop()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-ssdp.Server.prototype._startAdLoop" id="apidoc.element.node-ssdp.Server.prototype._startAdLoop">
        function <span class="apidocSignatureSpan">node-ssdp.Server.prototype.</span>_startAdLoop
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_startAdLoop = function () {
  assert.equal(this._adLoopInterval, null, 'Attempting to start a parallel ad loop')

  this._adLoopInterval = setInterval(this.advertise.bind(this), this._adInterval)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*/
SsdpServer.prototype._initAdLoop = function () {
 var self = this

 // Wake up.
 setTimeout(self.advertise.bind(self), 3000)

 self.<span class="apidocCodeKeywordSpan">_startAdLoop</span>()
}




/**
* Advertise shutdown and close UDP socket.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-ssdp.Server.prototype._stopAdLoop" id="apidoc.element.node-ssdp.Server.prototype._stopAdLoop">
        function <span class="apidocSignatureSpan">node-ssdp.Server.prototype.</span>_stopAdLoop
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_stopAdLoop = function () {
  assert.notEqual(this._adLoopInterval, null, 'Attempting to clear a non-existing interval')

  clearInterval(this._adLoopInterval)
  this._adLoopInterval = null
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (!this.sockets) {
    this._logger('Already stopped.')
    return
  }

  this.advertise(false)

  this.<span class="apidocCodeKeywordSpan">_stopAdLoop</span>()

  this._stop()
}



SsdpServer.prototype._startAdLoop = function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-ssdp.Server.prototype.advertise" id="apidoc.element.node-ssdp.Server.prototype.advertise">
        function <span class="apidocSignatureSpan">node-ssdp.Server.prototype.</span>advertise
        <span class="apidocSignatureSpan">(alive)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">advertise = function (alive) {
  var self = this

  if (!this.sockets) return
  if (alive === undefined) alive = true

  Object.keys(self._usns).forEach(function (usn) {
    var udn = self._usns[usn]
      , nts = alive ? c.SSDP_ALIVE : c.SSDP_BYE // notification sub-type

    var heads = {
      'HOST': self._ssdpServerHost,
      'NT': usn, // notification type, in this case same as ST
      'NTS': nts,
      'USN': udn
    }

    if (alive) {
      heads.LOCATION = self._location
      heads['CACHE-CONTROL'] = 'max-age=1800'
      heads.SERVER = self._ssdpSig // why not include this?
    }

    extend(heads, self._extraHeaders);

    self._logger('Sending an advertisement event')

    var message = self._getSSDPHeader(c.NOTIFY, heads)

    self._send(new Buffer(message), function (err, bytes) {
      self._logger('Outgoing server message: %o', {'message': message})
    })
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 */
SsdpServer.prototype.stop = function () {
  if (!this.sockets) {
    this._logger('Already stopped.')
    return
  }

  this.<span class="apidocCodeKeywordSpan">advertise</span>(false)

  this._stopAdLoop()

  this._stop()
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-ssdp.Server.prototype.start" id="apidoc.element.node-ssdp.Server.prototype.start">
        function <span class="apidocSignatureSpan">node-ssdp.Server.prototype.</span>start
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">start = function (cb) {
  var self = this

  if (self._socketBound) {
    self._logger('Server already running.')
    return
  }

  self._socketBound = true

  if (!self._suppressRootDeviceAdvertisements) {
    this._usns[this._udn] = this._udn
  }

  return new Promise(function(success, failure) {
    function onBind(err) {
      self._initAdLoop.apply(self, arguments)
      if (cb) cb.apply(self, arguments)
      if (err) return failure(err)
      success()
    }
    self._start(onBind)
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...





var Server = require('./index.js').Server;
var server = new Server();
server.<span class="apidocCodeKeywordSpan">start</span>();
setTimeout(function () {
  server.stop();
  server.start();
}, 500);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-ssdp.Server.prototype.stop" id="apidoc.element.node-ssdp.Server.prototype.stop">
        function <span class="apidocSignatureSpan">node-ssdp.Server.prototype.</span>stop
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stop = function () {
  if (!this.sockets) {
    this._logger('Already stopped.')
    return
  }

  this.advertise(false)

  this._stopAdLoop()

  this._stop()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...



var Server = require('./index.js').Server;
var server = new Server();
server.start();
setTimeout(function () {
  server.<span class="apidocCodeKeywordSpan">stop</span>();
  server.start();
}, 500);
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>